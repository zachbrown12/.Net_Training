!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-timeago",["exports","@angular/core","rxjs","rxjs/operators"],e):e(t["ngx-timeago"]={},t.ng.core,t.rxjs,t.rxjs.operators)}(this,function(t,r,s,u){"use strict";var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return s}function c(t){return null!=t}function p(t){return null!=t&&""+t!="false"}function l(t){var e=new Date(t);if(!Number.isNaN(e.valueOf()))return e;var n=String(t).match(/\d+/g);if(null===n||n.length<=2)return e;var r=a(n.map(function(t){return parseInt(t,10)})),i=r[0],o=r[1],s=r.slice(2);return new Date(Date.UTC.apply(Date,function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}([i,o-1],s)))}var f=3600,h=24*f,d=7*h,g=30*h,b=365*h,n=function j(){},m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.tick=function(r){return s.of(0).pipe(u.expand(function(){var t=Date.now(),e=Math.round(Math.abs(t-r)/1e3),n=e<60?1e3:e<f?6e4:e<h?36e5:0;return n?s.timer(n):s.empty()}),u.skip(1))},e.decorators=[{type:r.Injectable}],e}(n),e=function(){function t(){this.changes=new s.Subject}return t.decorators=[{type:r.Injectable}],t}(),y=function(t){var e=Date.now(),n=Math.round(Math.abs(e-t)/1e3),r=t<e?"ago":"from now",i=a(n<60?[Math.round(n),"second"]:n<f?[Math.round(n/60),"minute"]:n<h?[Math.round(n/f),"hour"]:n<d?[Math.round(n/h),"day"]:n<g?[Math.round(n/d),"week"]:n<b?[Math.round(n/g),"month"]:[Math.round(n/b),"year"],2);return{value:i[0],unit:i[1],suffix:r}},v=function M(){},x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.format=function(t){var e=y(t),n=e.suffix,r=e.value,i=e.unit;return this.parse(r,i,n)},e.prototype.parse=function(t,e,n){return 1!==t&&(e+="s"),t+" "+e+" "+n},e.decorators=[{type:r.Injectable}],e}(v),k=function(n){function t(t){var e=n.call(this)||this;return e.intl=t,e}return o(t,n),t.prototype.format=function(t){var e=y(t),n=e.suffix,r=e.value,i=e.unit;return this.parse(r,i,n,Date.now(),t)},t.prototype.parse=function(t,e,n,r,i){"week"!==e||this.intl.strings.week||this.intl.strings.weeks||(t=Math.round(Math.abs(r-i)/864e5),e="day");var o=this.normalizeFn(t,r-i,this.intl.strings.numbers),s=[];if("ago"===n&&this.intl.strings.prefixAgo&&s.push(o(this.intl.strings.prefixAgo)),"from now"===n&&this.intl.strings.prefixFromNow&&s.push(o(this.intl.strings.prefixFromNow)),1<t){var u=this.intl.strings[e+"s"]||this.intl.strings[e]||"%d "+e;s.push(o(u))}else{u=this.intl.strings[e]||this.intl.strings[e+"s"]||"%d "+e;s.push(o(u))}"ago"===n&&this.intl.strings.suffixAgo&&s.push(o(this.intl.strings.suffixAgo)),"from now"===n&&this.intl.strings.suffixFromNow&&s.push(o(this.intl.strings.suffixFromNow));var a="string"==typeof this.intl.strings.wordSeparator?this.intl.strings.wordSeparator:" ";return s.join(a)},t.prototype.normalizeNumber=function(e,t){return e&&10===e.length?String(t).split("").map(function(t){return t.match(/^[0-9]$/)?e[parseInt(t,10)]:t}).join(""):String(t)},t.prototype.normalizeFn=function(e,n,r){var i=this;return function(t){return"function"==typeof t?t(e,n).replace(/%d/g,i.normalizeNumber(r,e)):t.replace(/%d/g,i.normalizeNumber(r,e))}},t.decorators=[{type:r.Injectable}],t.ctorParameters=function(){return[{type:e}]},t}(v),S=function(){function t(t,e,n,r,i){var o=this;this.cd=e,this.clock=i,this.stateChanges=new s.Subject,this._live=!0,t&&(this.intlSubscription=t.changes.subscribe(function(){return o.stateChanges.next()})),this.stateChanges.subscribe(function(){o.setContent(r.nativeElement,n.format(o.date)),o.cd.markForCheck()})}return Object.defineProperty(t.prototype,"date",{get:function(){return this._date},set:function(t){var e=this;if(this._date=l(t).valueOf(),!this._date)throw new SyntaxError("Wrong parameter in TimeagoDirective. Expected a valid date, received: "+t);this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.clockSubscription=this.clock.tick(this.date).pipe(u.filter(function(){return e.live},this)).subscribe(function(){return e.stateChanges.next()})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"live",{get:function(){return this._live},set:function(t){this._live=p(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(){this.stateChanges.next()},t.prototype.setContent=function(t,e){c(t.textContent)?t.textContent=e:t.data=e},t.prototype.ngOnDestroy=function(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=undefined),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.stateChanges.complete()},t.decorators=[{type:r.Directive,args:[{selector:"[timeago]",exportAs:"timeago"}]}],t.ctorParameters=function(){return[{type:e,decorators:[{type:r.Optional}]},{type:r.ChangeDetectorRef},{type:v},{type:r.ElementRef},{type:n}]},t.propDecorators={date:[{type:r.Input}],live:[{type:r.Input}]},t}(),C=function(){function t(t,e,n,r){var i=this;this.clock=r,this.live=!0,this.stateChanges=new s.Subject,t&&(this.intlSubscription=t.changes.subscribe(function(){return i.stateChanges.next()})),this.stateChanges.subscribe(function(){i.value=n.format(i.date),e.markForCheck()})}return t.prototype.transform=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i,o=l(t).valueOf();if(i=c(n[0])?p(n[0]):this.live,this.date===o&&this.live===i)return this.value;if(this.date=o,this.live=i,!this.date)throw new SyntaxError("Wrong parameter in TimeagoPipe. Expected a valid date, received: "+t);return this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.clockSubscription=this.clock.tick(this.date).pipe(u.filter(function(){return e.live},this)).subscribe(function(){return e.stateChanges.next()}),this.stateChanges.next(),this.value},t.prototype.ngOnDestroy=function(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=undefined),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=undefined),this.stateChanges.complete()},t.decorators=[{type:r.Injectable},{type:r.Pipe,args:[{name:"timeago",pure:!1}]}],t.ctorParameters=function(){return[{type:e,decorators:[{type:r.Optional}]},{type:r.ChangeDetectorRef},{type:v},{type:n}]},t}(),w=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.clock||{provide:n,useClass:m},t.intl||[],t.formatter||{provide:v,useClass:x}]}},e.forChild=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.clock||{provide:n,useClass:m},t.intl||[],t.formatter||{provide:v,useClass:x}]}},e.decorators=[{type:r.NgModule,args:[{declarations:[S,C],exports:[S,C]}]}],e}();t.TimeagoDirective=S,t.TimeagoPipe=C,t.TimeagoIntl=e,t.TimeagoClock=n,t.TimeagoDefaultClock=m,t.TimeagoFormatter=v,t.TimeagoDefaultFormatter=x,t.TimeagoCustomFormatter=k,t.TimeagoModule=w,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-timeago.umd.min.js.map